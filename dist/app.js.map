{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/sierpinski.ts","../src/app.ts"],"names":[],"mappings":"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","sourcesContent":["import d3, { BaseType, Selection } from 'd3';\n\nexport default class Sierpinski {\n  private height: number;\n  private side: number;\n  private width: number;\n\n  private _deep = 6;\n  private _sin30 = Math.pow(3, 1 / 2) / 2;\n  private _cos30 = .5;\n\n  private _zoom = 0;\n\n  private svg: Selection<BaseType, {}, null, undefined>;\n\n  constructor(private $element: HTMLElement) {\n    this.height = $element.offsetHeight;\n    this.width = $element.offsetWidth;\n    this.side = Math.min(this.height, this.width);\n\n    this.svg = this.setupSVG();\n  }\n\n  public draw(): void {\n    this.drawTriangle(this.width / 2, this.height * 2 / 3, this.side * 2 / 3);\n  }\n\n  private drawTriangle(centerX: number, centerY: number, radius: number, i: number = 0): void {\n    const cal1 = `${centerX},${centerY - radius}`;\n    const cal2 = `${centerX - radius * this._sin30},${centerY + radius * this._cos30}`;\n    const cal3 = `${centerX + radius * this._sin30},${centerY + radius * this._cos30}`;\n\n    this.svg.append('polygon')\n      .attr('zoom', this._zoom)\n      .attr('fill', i < this._deep ? 'white' : 'black')\n      .attr('points', `${cal1} ${cal2} ${cal3}`);\n\n    if (i < this._deep) {\n      this.drawTriangle(centerX, centerY - radius / 2, radius / 2, i + 1);\n      this.drawTriangle(centerX - radius * this._sin30 / 2,\tcenterY + radius * this._cos30 / 2, radius / 2, i + 1);\n      this.drawTriangle(centerX + radius * this._sin30 / 2,\tcenterY + radius * this._cos30 / 2, radius / 2, i + 1);\n    }\n  }\n\n  private redraw(): void {\n    this.svg.attr('transform', d3.event.transform.toString());\n  }\n\n  private setupSVG(): Selection<BaseType, {}, null, undefined> {\n    // Sometimes we have to do, what we have to do... :D\n    const hackedD3 = d3 as any;\n    const behavior = hackedD3.behavior || {zoom: d3.zoom};\n\n    const svg = d3.select(this.$element)\n      .append('svg:svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('pointer-events', 'all')\n\n      .append('svg:g')\n      .call(behavior.zoom().on('zoom', this.redraw.bind(this)) as any)\n\n      .append('svg:g');\n\n    svg\n      .append('svg:rect')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('fill', 'white');\n\n    return svg;\n  }\n}\n","import Sierpinski from './sierpinski';\n\nexport class App {\n  public run() {\n    this.setupTriangle(document.querySelector('main div'));\n  }\n\n  private setupTriangle($element: HTMLElement | null): void {\n    if (!$element) {\n      return;\n    }\n\n    const triangle = new Sierpinski($element);\n\n    triangle.draw();\n  }\n}\n"]}